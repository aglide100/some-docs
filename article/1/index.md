# CI/CD란


CI(`Continues Intergration`)과 CD(`Continues Delivery`)라는 용어는 개발을 하다보면 왠하면 듣게 될것이다.

이를 직역하자면 지속성 통합과 지속적 배달이라고 해석할 수 있겠다.

또한 일부에서는 CD를 `Continuous Deployment`라고 확장하기도 한다.


단어가 갑자기 어려워진거 같지만 요는 원시 코드가 프로덕션까지 가는 여정을 고급지게 부르는 말이다.

# 🔍 어원

1991년 Grady Booch에 의해서 처음 사용되었다고 알려진다. 이후 `Extreme programming`(XP)에서 본격적으로 정의되고 사용되었다고 한다.

# 🔑 Key Point

XP에서는 `Collective Code Ownership`에서 왜 CI가 필요한지를 설명한다.

<br>


<p align="center" style="color:gray">
    <img style="margin:10px 0px -10px"  src="./img/Collective Code Ownership.png" width=600 />
    <p align="center">http://www.extremeprogramming.org/rules/integrateoften.html</p>
    <br>
</p> 


XP에서는 개발자는 가능한 주기적으로 코드 저장소에 커밋해야한다고 한다.

이는 코드 병합을 미룸으로서 발생할 수 있는 다양한 문제, 호환성 문제와 같은 여러 문제를 피하기 위해서라고 한다.

원인은 여러가지가 있겠지만 코드 병합을 미룸으로서 오는 사이드 이펙트는 비용의 발생이며 이러한 부분도 충분히 예방할 수 있다는게 XP에서의 설명이다.

당연하겠지만 해당 이유를 통한 비용 지불은 굉장히 소모적이고 피곤한 일이다.

<br>

이와 함께 등장하는 단어가 `Sequential Integration`(순차적 통합)이다.

XP에서는 개발자가 코드를 병렬적으로 통합하는 일은 대부분 확인을 하지 않거나 단순한 믿음을 통해서 발생한다고 한다.

이렇게 병합된 코드는 당연히 검증되지 않은 상태에서 벌어진다.

테스트 되지 않은 코드는 잠재적이거나 미시적으로도 문제가 발생할 수도 있다.

따라서 빈번하게 테스트하고 코드를 통합하는 것이 순차적 통합의 내용이라고 할 수 있다.

<br>

그리고 주요 개념으로서 `Collective Code Ownership`(집단적 코드 소유)를 이야기한다.

여기서는 모든 개발자가 어떠한 세그먼트에 대해서든 아이디어/버그/리팩토링을 위해서 코드를 변경할 수 있도록 장려하는 개념이다.

대부분의 아키텍처는 수석/리드 프로그래머 아키텍트의 의해서 아키텍처가 결정될 것이고 아키텍처에 대한 사항을 단 한명 혹은 소수의 사람이 가지고 있을 것이다.

이는 잘못된 패턴은 아니지만 좋든 싫든 이미 아키텍처에 대한 디자인은 팀의 전반적으로 분산되어 있더고 한다.


개발자가 커밋을 하면서 알게 모르게 아키텍처에 관여한다고도 할 수 있다.


<br>

그렇다면 누구든 디자인 패턴을 변경해야 한다면 리드/수석 아키텍트에게 검증 혹은 권한을 받아야 하는가? 라고 하기에는 복잡한 문제가 된다.

<p align="center" style="color:gray">
    <img style="margin:10px 0px -10px" src="./img/Fully Automated.png"  width=400 />
    <p align="center">자동화된 개발프로세스</p>
    <br>
</p> 


그렇기에 XP에서는 단위테스트를 통해 이를 해결하고자 한다.

자동화된 단위 테스트를 릴리스로 넘어가기 전 100% 통과를 목표로 한다면 `Continues Intergration`를 통해서 개발자는 이러한 문제에 대해서 넘어갈 수 있다고 한다.

해당 CI가 정상적으로 기능한다면 누구나 클래스의 모든 메서드에 접근하고 수정할 수 있다. 

이는 소수의 인원의 감독하에 관리되는것보다 공동의 책임을 통해 관리하는 것이 더 신뢰가 가능하다고 한다.

보다 현실적인 이유는 프로젝트에 인원이 주기적으로 변경되기에 오히려 집단 소유권이 더 현실적인 이유가 될 수 있다.

## 요약

CI(지속적 통합)이 나오게 된 이유는 집단적 코드 소유에 대한 실현으로 단위 테스트 및 코드 저장소에 합치기 위해 사용한다.


# 📜 개발 방법론

XP에서 CI를 다루는 가장 중요한 요소는 아키텍처와 Unit Test를 통해 소스 코드를 어떻게 코드 저장소로 병합할 것인지를 가장 중요하게 여기고 있다.

이는 aws가 ci/cd에 대한 보고서를 작성하면서 ci/cd를 어떻게 구성해야하는지 등에 작성한 보고서 또한 존재한다.

해당 보고서에서는 GitFlow와 TrunkBased방식의 개발 방법론에 ci/cd에 대해서 작성되어있다.

1. GitFlow

<img src="./img/GitFlow.png">

2. TrunkBased

<img src="./img/TrunkBased.png">

 
위 두가지 방법 모두 Git에 대하여 접근은 다르지만 공통적으로 통합 테스트가 단계마다 들어간다는 것을 알 수 있다.